@charset "UTF-8";

/* 通用样式表 */

@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Rock+Salt&display=swap');

:root {
    /* 霓虹风色板 */
    --magenta-bg: #ff00ff; --cyan-neon: #00ffff; --pink-neon: #ff69b4; --yellow-neon: #ffff00; --green-neon: #00ff00; --title-magenta: #ff00ff; --title-cyan: #00ffff;
    /* 日记专用色 */
    --paper-bg: #eaddc5; --ink-color: #3a2a1a; --blood-color: #8a0a0a;
    /* Win95 像素电脑风色板 */
    --win95-gray: #c0c0c0; --win95-dark-gray: #808080; --win95-blue: #000080; --win95-light-blue: #a6caf0; --win95-white: #ffffff; --win95-black: #000000; --sky-blue-top: #4080c0; --sky-blue-bottom: #a0d0f0;
    /* Winamp 播放器专用色 */
    --winamp-bg: #2b2b2b; --winamp-green: #00ff00;
    /* 调试用色 */
    --debug-magenta: rgba(255, 0, 255, 0.4);
}

/* 基础设置 & 像素小手 */
* { margin: 0; padding: 0; box-sizing: border-box; user-select: none; cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRxyAAAADFBMVEUAAAD/AP//zP///+80G4bVAAAAAnRSTlMABQE80VAAAAA1SURBVAjXY2BgYDBkYGBgQhC7wZCBwYEhg4kBiM0OYjA0MGQwMTCEgGgwA9kMdgz//4OEAQCjAw4j0K+8AAAAAElFTkSuQmCC'), auto; }
body, html { width: 100%; height: 100%; background-color: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; }

/* === 入口界面 & 标题 === */
#intro-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; z-index: 999; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow: hidden; }
.intro-grid-bg { position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background-image: linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px); background-size: 50px 50px; transform: perspective(500px) rotateX(60deg); animation: grid-move 10s linear infinite; opacity: 0.3; pointer-events: none; }
@keyframes grid-move { 0% { background-position: 0 0; } 100% { background-position: 0 50px; } }
.intro-content { position: relative; z-index: 2; text-align: center; display: flex; flex-direction: column; align-items: center; }
.glitch-title { font-family: 'Press Start 2P'; font-size: 3rem; position: relative; color: var(--title-magenta); text-shadow: 4px 4px 0px var(--title-cyan); margin-bottom: 20px; }
.room-title { font-size: 4.5rem; letter-spacing: 8px; margin-top: 20px; }
.glitch-title::before, .glitch-title::after { content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; overflow: hidden; clip: rect(0, 900px, 0, 0); }
.glitch-title::before { left: -2px; text-shadow: 2px 0 var(--title-cyan); color: var(--title-cyan); mix-blend-mode: lighten; animation: glitch-anim-1 2s infinite linear alternate-reverse; }
.glitch-title::after { left: 2px; text-shadow: -2px 0 var(--title-magenta); color: var(--title-magenta); mix-blend-mode: lighten; animation: glitch-anim-2 3s infinite linear alternate-reverse; }
@keyframes glitch-anim-1 { 0% { clip: rect(20px, 9999px, 15px, 0); transform: translate(-2px); } 10% { clip: rect(60px, 9999px, 80px, 0); transform: translate(2px); } 20% { clip: rect(10px, 9999px, 55px, 0); transform: translate(-1px); } 30% { clip: rect(90px, 9999px, 100px, 0); transform: translate(1px); } 40% { clip: rect(35px, 9999px, 45px, 0); transform: translate(-2px); } 50% { clip: rect(70px, 9999px, 75px, 0); transform: translate(2px); } 60% { clip: rect(5px, 9999px, 30px, 0); transform: translate(-1px); } 70% { clip: rect(50px, 9999px, 60px, 0); transform: translate(1px); } 80% { clip: rect(15px, 9999px, 25px, 0); transform: translate(-2px); } 90% { clip: rect(85px, 9999px, 95px, 0); transform: translate(2px); } 100% { clip: rect(40px, 9999px, 50px, 0); transform: translate(-1px); } }
@keyframes glitch-anim-2 { 0% { clip: rect(80px, 9999px, 90px, 0); transform: translate(2px); } 10% { clip: rect(10px, 9999px, 20px, 0); transform: translate(-2px); } 20% { clip: rect(50px, 9999px, 60px, 0); transform: translate(1px); } 30% { clip: rect(30px, 9999px, 40px, 0); transform: translate(-1px); } 40% { clip: rect(70px, 9999px, 80px, 0); transform: translate(2px); } 50% { clip: rect(20px, 9999px, 30px, 0); transform: translate(-2px); } 60% { clip: rect(90px, 9999px, 100px, 0); transform: translate(1px); } 70% { clip: rect(40px, 9999px, 50px, 0); transform: translate(-1px); } 80% { clip: rect(60px, 9999px, 70px, 0); transform: translate(2px); } 90% { clip: rect(5px, 9999px, 15px, 0); transform: translate(-2px); } 100% { clip: rect(25px, 9999px, 35px, 0); transform: translate(1px); } }
.terminal-status { font-family: 'Press Start 2P'; font-size: 1rem; color: var(--cyan-neon); text-align: left; margin-bottom: 40px; opacity: 0.8; line-height: 1.8; }
.status-ready { color: var(--yellow-neon); }
.blinking-cursor { animation: blink 1s steps(2, start) infinite; }
.start-btn { font-family: 'Press Start 2P'; background: transparent; border: 3px solid var(--title-magenta); color: var(--title-magenta); padding: 20px 40px; font-size: 20px; cursor: pointer; box-shadow: 4px 4px 0px var(--title-cyan); transition: all 0.1s; }
.start-btn:hover { background: var(--title-magenta); color: black; box-shadow: 2px 2px 0px var(--title-cyan); transform: translate(2px, 2px); }

/* === 日记弹窗层 === */
#diary-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
#diary-overlay.active { opacity: 1; pointer-events: auto; }
.diary-paper { position: relative; width: 55vmin; min-height: 65vmin; background-color: var(--paper-bg); color: var(--ink-color); padding: 50px 40px; box-shadow: 15px 15px 30px rgba(0,0,0,0.6), inset 0 0 80px rgba(139, 69, 19, 0.2); border-radius: 2px 8px 4px 12px/6px 4px 10px 3px; transform: rotate(-3deg); }
.diary-paper::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E"); opacity: 0.6; pointer-events: none; mix-blend-mode: multiply; }
.diary-text { font-family: 'Rock Salt', 'Comic Sans MS', '楷体', 'KaiTi', cursive; font-size: 1.6rem; line-height: 1.8; text-align: left; }
.diary-text p { margin-bottom: 2rem; transform-origin: center left; }
.diary-text p:nth-child(1) { transform: rotate(-1deg) translateX(5px); }
.diary-text p:nth-child(2) { transform: rotate(0.5deg) translateX(-2px); }
.diary-text p:nth-child(3) { transform: rotate(-0.8deg) translateX(3px); }
.diary-text p:nth-child(5) { transform: rotate(0.3deg) translateX(-1px); }
.angry-text { font-size: 2rem; font-weight: bold; color: var(--blood-color); text-decoration: none; text-shadow: 1px 1px 2px rgba(138, 10, 10, 0.5), 0 0 5px rgba(138, 10, 10, 0.3); display: inline-block; transform: rotate(-2deg) scale(1.05); }
.angry-text-en { font-family: 'Rock Salt', cursive; font-size: 2.5rem; color: var(--blood-color); text-shadow: 2px 2px 4px rgba(138, 10, 10, 0.6); display: block; text-align: center; transform: rotate(4deg) translateY(10px); margin-top: 30px; }

/* === PC 电脑弹窗层 === */
#pc-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2100; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; background-color: rgba(0,0,0,0.5); }
#pc-overlay.active { opacity: 1; pointer-events: auto; }
.pc-screen { width: 85vmin; aspect-ratio: 4 / 3; background-color: var(--win95-gray); border-top: 3px solid var(--win95-white); border-left: 3px solid var(--win95-white); border-right: 3px solid var(--win95-dark-gray); border-bottom: 3px solid var(--win95-dark-gray); box-shadow: 2px 2px 10px rgba(0,0,0,0.5); display: flex; flex-direction: column; overflow: hidden; font-family: 'Press Start 2P', monospace; image-rendering: pixelated; }
.pc-desktop { flex: 1; position: relative; background: linear-gradient(to bottom, var(--sky-blue-top) 0%, var(--win95-light-blue) 40%, var(--win95-light-blue) 60%, var(--sky-blue-bottom) 100%); padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); grid-auto-rows: 100px; gap: 10px; align-content: start; }
.desktop-icon { display: flex; flex-direction: column; align-items: center; text-align: center; cursor: pointer; color: var(--win95-white); }
.desktop-icon:hover .icon-img { filter: brightness(1.2); }
.desktop-icon:hover .icon-text { background-color: var(--win95-blue); }
.icon-img { width: 48px; height: 48px; background-color: var(--win95-gray); border: 2px solid; border-color: var(--win95-white) var(--win95-dark-gray) var(--win95-dark-gray) var(--win95-white); margin-bottom: 5px; background-image: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%); background-size: 10px 10px; background-position: 0 0, 0 5px, 5px -5px, -5px 0px; }
.icon-my-computer .icon-img { background-color: #a0a0a0; }
.icon-recycle-bin .icon-img { background-color: #80a080; }
.icon-folder .icon-img { background-color: #e0c080; }
.icon-text { font-size: 0.8rem; padding: 2px 5px; }
.win95-window { position: absolute; background-color: var(--win95-gray); border-top: 2px solid var(--win95-white); border-left: 2px solid var(--win95-white); border-right: 2px solid var(--win95-black); border-bottom: 2px solid var(--win95-black); box-shadow: 1px 1px 0 var(--win95-dark-gray), -1px -1px 0 var(--win95-white); display: flex; flex-direction: column; }
.window-titlebar { height: 24px; background: linear-gradient(to right, var(--win95-blue), var(--win95-light-blue)); color: var(--win95-white); display: flex; align-items: center; justify-content: space-between; padding: 0 4px; font-size: 0.9rem; }
.window-title { margin-left: 5px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
.window-controls { display: flex; }
.win-btn { width: 18px; height: 18px; background-color: var(--win95-gray); border-top: 1px solid var(--win95-white); border-left: 1px solid var(--win95-white); border-right: 1px solid var(--win95-black); border-bottom: 1px solid var(--win95-black); box-shadow: 1px 1px 0 var(--win95-dark-gray); display: flex; justify-content: center; align-items: center; font-size: 0.8rem; color: var(--win95-black); cursor: pointer; margin-left: 2px; }
.win-btn:active { border-top: 1px solid var(--win95-black); border-left: 1px solid var(--win95-black); border-right: 1px solid var(--win95-white); border-bottom: 1px solid var(--win95-white); box-shadow: none; padding-top: 2px; padding-left: 2px; }
.win-btn.close-btn:hover { background-color: #f00; color: #fff; }
.window-content { flex: 1; padding: 10px; overflow: auto; color: var(--win95-black); font-size: 0.9rem; background-color: var(--win95-white); border: 2px solid; border-color: var(--win95-dark-gray) var(--win95-white) var(--win95-white) var(--win95-dark-gray); margin: 5px; }
.winamp-player { top: 30px; left: 30px; width: 300px; height: auto; }
.winamp-player .window-titlebar { background: linear-gradient(to right, #4a505c, #8a909c); }
.winamp-content { background-color: var(--winamp-bg); padding: 10px; display: flex; flex-direction: column; gap: 10px; }
.winamp-screen { background-color: #000; color: var(--winamp-green); padding: 5px; border: 2px solid var(--win95-dark-gray); font-size: 0.7rem; display: flex; justify-content: space-between; }
.winamp-song-title { overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 70%; }
.winamp-time { font-family: monospace; }
.winamp-visualizer { height: 30px; background-color: #111; border: 1px solid #333; display: flex; align-items: flex-end; padding: 2px; gap: 2px; }
.viz-bar { width: 8px; background-color: var(--winamp-green); animation: viz-bounce 0.5s infinite alternate ease-in-out; }
.viz-bar:nth-child(1) { height: 60%; animation-delay: 0.1s; }
.viz-bar:nth-child(2) { height: 80%; animation-delay: 0.3s; }
.viz-bar:nth-child(3) { height: 40%; animation-delay: 0.2s; }
.viz-bar:nth-child(4) { height: 90%; animation-delay: 0.4s; }
.viz-bar:nth-child(5) { height: 50%; animation-delay: 0s; }
@keyframes viz-bounce { 0% { height: 20%; opacity: 0.7; } 100% { height: 95%; opacity: 1; } }
.winamp-controls { display: flex; gap: 5px; justify-content: center; }
.amp-btn { width: 30px; height: 30px; border: 2px solid var(--win95-dark-gray); background-color: #c0c0c0; display: flex; justify-content: center; align-items: center; cursor: pointer; font-size: 0.7rem; }
.amp-btn:active { border-color: var(--win95-black); background-color: #a0a0a0; }
.amp-btn.play { background-color: var(--winamp-green); color: black; }
.secret-diary-window { top: 100px; left: 400px; width: 350px; height: 250px; display: none; }
.secret-diary-window.visible { display: flex; }
.secret-diary-window .window-content { font-family: 'Rock Salt', cursive; font-size: 0.8rem; line-height: 1.5; white-space: pre-wrap; }
.secret-diary-window .window-titlebar { background: linear-gradient(to right, #8a0a0a, #c04040); }
.pc-taskbar { height: 32px; background-color: var(--win95-gray); border-top: 2px solid var(--win95-white); display: flex; align-items: center; padding: 2px; }
.start-button { display: flex; align-items: center; padding: 2px 6px; background-color: var(--win95-gray); border-top: 2px solid var(--win95-white); border-left: 2px solid var(--win95-white); border-right: 2px solid var(--win95-black); border-bottom: 2px solid var(--win95-black); box-shadow: 1px 1px 0 var(--win95-dark-gray); cursor: pointer; margin-right: 5px; }
.start-button:active { border-top: 2px solid var(--win95-black); border-left: 2px solid var(--win95-black); border-right: 2px solid var(--win95-white); border-bottom: 2px solid var(--win95-white); box-shadow: none; padding: 4px 4px 0 8px; }
.start-icon { width: 16px; height: 16px; background-color: var(--win95-dark-gray); margin-right: 4px; }
.start-text { font-weight: bold; color: var(--win95-black); font-size: 0.9rem; }
.taskbar-divider { flex: 1; }
.taskbar-time { padding: 4px 8px; background-color: var(--win95-gray); border: 2px solid; border-color: var(--win95-dark-gray) var(--win95-white) var(--win95-white) var(--win95-dark-gray); color: var(--win95-black); font-size: 0.8rem; }

/* === CRT 大屁股显示器核心 === */
.crt-monitor { position: relative; width: 98vmin; aspect-ratio: 4 / 3; background: #000; border-radius: 10px; border: 3px solid var(--cyan-neon); box-shadow: 0 0 20px var(--cyan-neon), 0 0 40px var(--cyan-neon), inset 0 0 60px rgba(0,0,0,0.8); overflow: hidden; opacity: 0; transform: scale(0.98); transition: opacity 0.5s, transform 0.5s, filter 0.1s; }
.crt-monitor.power-on { opacity: 1; transform: scale(1); animation: turn-on 0.4s linear forwards; }
@keyframes turn-on { 0% { transform: scale(1, 0.001); opacity: 0; filter: brightness(5); } 50% { transform: scale(1, 0.001); opacity: 1; filter: brightness(5); } 100% { transform: scale(1, 1); opacity: 1; filter: brightness(1); } }
.crt-monitor.severe-glitch { animation: severe-shake 0.2s infinite, color-shift 0.1s infinite alternate; filter: contrast(2) brightness(1.5) hue-rotate(90deg); }
.crt-monitor.monitor-dead { background: #000 !important; border-color: #333; box-shadow: none; }
.crt-monitor.monitor-dead > * { display: none !important; }
@keyframes severe-shake { 0% { transform: translate(2px, 2px) scale(1.01); } 25% { transform: translate(-2px, -2px) scale(0.99); } 50% { transform: translate(2px, -2px) scale(1.02); } 75% { transform: translate(-2px, 2px) scale(0.98); } 100% { transform: translate(0, 0) scale(1); } }
@keyframes color-shift { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(180deg) invert(1); } }
.scanlines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.2) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); background-size: 100% 3px, 3px 100%; pointer-events: none; opacity: 0.8; }
.crt-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 11; pointer-events: none; background: radial-gradient(circle at center, transparent 50%, rgba(0,0,0,0.6) 100%); box-shadow: inset 0 0 20px rgba(255,255,255,0.1); animation: crt-flicker 0.15s infinite; }
@keyframes crt-flicker { 0% { opacity: 0.95; } 100% { opacity: 1; } }
.rgb-split::before, .rgb-split::after { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; mix-blend-mode: screen; opacity: 0.5; pointer-events: none; background: inherit; }
.rgb-split::before { background-color: rgba(255, 0, 0, 0.5); transform: translateX(-2px); }
.rgb-split::after { background-color: rgba(0, 0, 255, 0.5); transform: translateX(2px); }
/* 修复：添加 pointer-events: none 防止挡住鼠标 */
.rec-indicator { position: absolute; top: 20px; left: 20px; z-index: 20; font-family: 'Press Start 2P'; font-size: 1.5vmin; color: var(--cyan-neon); text-shadow: 0 0 5px var(--cyan-neon); display: flex; align-items: center; gap: 10px; pointer-events: none; }
.rec-dot { width: 15px; height: 15px; background: red; border-radius: 50%; box-shadow: 0 0 10px red; animation: blink 1s steps(2, start) infinite; }
@keyframes blink { to { visibility: hidden; } }

/* === 热区样式 === */
.placeholder-zone { position: absolute; border: 2px dashed rgba(255, 255, 255, 0.4); background-color: rgba(0, 255, 255, 0.1); color: white; font-size: 1vmin; font-family: 'Press Start 2P'; display: flex; justify-content: center; align-items: center; z-index: 5; transition: all 0.2s; box-shadow: 0 0 5px currentColor; text-shadow: 0 0 5px currentColor; }
.placeholder-zone:hover { background-color: rgba(0, 255, 255, 0.3); border-color: var(--cyan-neon); box-shadow: 0 0 15px var(--cyan-neon); color: var(--cyan-neon); cursor: pointer; }
.placeholder-zone.zone-tiny { width: 4vmin; height: 4vmin; border-radius: 50%; transform: translate(-50%, -50%); z-index: 6; font-size: 0.7vmin; border: 2px solid var(--pink-neon); background-color: var(--debug-magenta); color: white; }
.placeholder-zone.zone-tiny:hover { background-color: var(--cyan-neon); border-color: var(--cyan-neon); box-shadow: 0 0 15px var(--cyan-neon), 0 0 30px var(--cyan-neon); cursor: crosshair; }
body.locked .placeholder-zone { pointer-events: none !important; cursor: default !important; }
