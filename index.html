<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE ROOM - ENTRY</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <!-- === 入口封面 === -->
    <div id="intro-overlay">
        <div class="intro-grid-bg"></div>
        <div class="intro-content">
            <h1 class="glitch-title room-title" data-text="THE ROOM">THE ROOM</h1>
            <div class="terminal-status">
                <p>> CONNECTING TO HOST...</p>
                <p>> SYNCHRONIZING NEURAL LINK...</p>
                <p class="status-ready">> GATEWAY READY. AWAITING INPUT<span class="blinking-cursor">_</span></p>
            </div>
            <button id="start-btn" class="start-btn">INITIALIZE ENTRY</button>
        </div>
    </div>

    <!-- === 日记弹窗层 === -->
    <div id="diary-overlay">
        <div class="diary-paper">
            <div class="diary-text">
                <p>Day 45.</p>
                <p>别再看了... 求求你...</p>
                <p>我知道你在那儿。屏幕左上角那个红点一直在闪。我能感觉到你的视线，像虫子在皮肤上爬。</p>
                <p>你到底想干什么？为什么不放过我？</p>
                <p class="angry-text">滚出去！滚出我的脑子！</p>
                <p>我恨这间屋子。我恨这个笼子。</p>
                <span class="angry-text-en">I HATE YOU.</span>
            </div>
        </div>
    </div>

    <!-- === PC 电脑弹窗层 === -->
    <div id="pc-overlay">
        <div class="pc-screen">
            <div class="pc-desktop">
                <!-- 桌面图标 -->
                <div class="desktop-icon icon-my-computer"><div class="icon-img"></div><div class="icon-text">My Computer</div></div>
                <div class="desktop-icon icon-recycle-bin"><div class="icon-img"></div><div class="icon-text">Recycle Bin</div></div>
                <div class="desktop-icon icon-folder" id="secret-folder-icon"><div class="icon-img"></div><div class="icon-text">Secret Files</div></div>
                
                <!-- Winamp 播放器窗口 -->
                <div class="win95-window winamp-player">
                    <div class="window-titlebar"><div class="window-title">Winamp - 1.91</div><div class="window-controls"><div class="win-btn minimize-btn">_</div><div class="win-btn close-btn">X</div></div></div>
                    <div class="window-content winamp-content">
                        <div class="winamp-screen"><div class="winamp-song-title">Song: Lo-Fi Chill Beats to Study/Relax To</div><div class="winamp-time">02:45</div></div>
                        <div class="winamp-visualizer"><div class="viz-bar"></div><div class="viz-bar"></div><div class="viz-bar"></div><div class="viz-bar"></div><div class="viz-bar"></div></div>
                        <div class="winamp-controls"><div class="amp-btn prev">|&lt;&lt;</div><div class="amp-btn play">&gt;</div><div class="amp-btn pause">||</div><div class="amp-btn stop">■</div><div class="amp-btn next">&gt;&gt;|</div></div>
                    </div>
                </div>

                <!-- 秘密日记窗口 (默认隐藏) -->
                <div class="win95-window secret-diary-window" id="secret-diary-window">
                    <div class="window-titlebar"><div class="window-title">help_me.txt - Notepad</div><div class="window-controls"><div class="win-btn minimize-btn">_</div><div class="win-btn maximize-btn">□</div><div class="win-btn close-btn" id="close-secret-diary">X</div></div></div>
                    <div class="window-content" style="background: #fff; overflow-y: scroll;">
                        <p>If you are reading this...</p>
                        <p>Please help me.</p>
                        <p>I'm trapped here. I don't know how long it's been.</p>
                        <p>There are cameras everywhere. He is watching.</p>
                        <p>I hid this file.</p>
                        <p>Find a way to get me out.</p>
                        <p>- 404</p>
                    </div>
                </div>
            </div>
            <!-- 任务栏 -->
            <div class="pc-taskbar"><div class="start-button"><div class="start-icon"></div><div class="start-text">Start</div></div><div class="taskbar-divider"></div><div class="taskbar-time">11:31 PM</div></div>
        </div>
    </div>

    <!-- === CRT 显示器核心容器 === -->
    <div class="crt-monitor" id="monitor">
        <!-- CRT 特效层 -->
        <div class="rgb-split"></div>
        <div class="scanlines"></div>
        <div class="crt-overlay"></div>
        <!-- 录像指示器 -->
        <div class="rec-indicator"><div class="rec-dot"></div>REC [00:01:25]</div>
        
        <!-- === 主游戏页面 (房间视图) === -->
        <div id="game-content">
            <!-- 大区域热区 -->
            <div id="zone-lamp" class="placeholder-zone">Lamp</div>
            <div id="zone-window" class="placeholder-zone">Window</div>
            <div id="zone-pc" class="placeholder-zone">PC</div>
            <div id="zone-sofa" class="placeholder-zone">Sofa</div>
            <div id="zone-instrument" class="placeholder-zone">Instrument</div>
            <div id="zone-cat" class="placeholder-zone">Cat</div>
            <div id="zone-girl" class="placeholder-zone">Girl Body</div>
            
            <!-- 【恢复】喉咙热区 -->
            <div id="zone-throat" class="placeholder-zone">Throat</div>
            
            <!-- 微型线索点 -->
            <div id="zone-books" class="placeholder-zone zone-tiny">Books</div>
            <div id="zone-clue-window" class="placeholder-zone zone-tiny">Clue W</div>
            <div id="zone-clue-ceiling" class="placeholder-zone zone-tiny">Clue C</div>
            
            <!-- 陷阱触发点 -->
            <div id="zone-outside-trigger" class="placeholder-zone zone-tiny">TRAP!</div>
        </div>
    </div>

    <!-- 音效占位符 -->
    <audio id="sfx-boot" src=""></audio>
    <audio id="sfx-notice" src=""></audio>
    <audio id="sfx-crash" src=""></audio>
    <audio id="bgm-room" loop src=""></audio>

    <script>
        // === 基础元素获取 ===
        const introOverlay = document.getElementById('intro-overlay');
        const startBtn = document.getElementById('start-btn');
        const monitor = document.getElementById('monitor');
        
        // === 音频元素 ===
        const bgmRoom = document.getElementById('bgm-room');
        const sfxNotice = document.getElementById('sfx-notice');
        const sfxCrash = document.getElementById('sfx-crash');
        
        // === 热区元素 ===
        const outsideTrigger = document.getElementById('zone-outside-trigger');
        const girlZone = document.getElementById('zone-girl');
        const booksZone = document.getElementById('zone-books');
        const pcZone = document.getElementById('zone-pc');
        // const throatZone = document.getElementById('zone-throat'); // 暂时用不上
        
        // === 弹窗元素 ===
        const diaryOverlay = document.getElementById('diary-overlay');
        const pcOverlay = document.getElementById('pc-overlay');
        const secretFolderIcon = document.getElementById('secret-folder-icon');
        const secretDiaryWindow = document.getElementById('secret-diary-window');
        const closeSecretDiaryBtn = document.getElementById('close-secret-diary');

        // === 1. 开始游戏 ===
        startBtn.addEventListener('click', () => {
            introOverlay.style.display = 'none';
            monitor.classList.add('power-on');
        });

        // === 2. 日记交互 ===
        booksZone.addEventListener('click', (e) => {
            e.stopPropagation();
            diaryOverlay.classList.add('active');
        });
        diaryOverlay.addEventListener('click', () => {
            diaryOverlay.classList.remove('active');
        });
        document.querySelector('.diary-paper').addEventListener('click', (e) => {
            e.stopPropagation();
        });

        // === 3. PC 交互 ===
        pcZone.addEventListener('click', (e) => {
            e.stopPropagation();
            pcOverlay.classList.add('active');
        });
        pcOverlay.addEventListener('click', () => {
            pcOverlay.classList.remove('active');
        });
        document.querySelector('.pc-screen').addEventListener('click', (e) => {
            e.stopPropagation();
        });
        secretFolderIcon.addEventListener('click', (e) => {
            e.stopPropagation();
            secretDiaryWindow.classList.add('visible');
        });
        closeSecretDiaryBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            secretDiaryWindow.classList.remove('visible');
        });

        // === 4. 陷阱触发 ===
        outsideTrigger.addEventListener('click', () => {
            console.log("踩雷了: TRAP!");
            document.body.classList.add('locked');
            if(bgmRoom.src) bgmRoom.pause();
            if(sfxNotice.src) sfxNotice.play();
            setTimeout(() => { girlZone.classList.add('approaching'); }, 500);
            setTimeout(() => {
                if(sfxCrash.src) sfxCrash.play();
                monitor.classList.add('severe-glitch');
                setTimeout(() => {
                     monitor.classList.remove('severe-glitch');
                     monitor.classList.add('monitor-dead');
                }, 500);
            }, 3500);
        });
    </script>
</body>
</html>
